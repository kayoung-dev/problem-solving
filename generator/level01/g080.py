import os
import random
from collections import deque

# ---------------------------------------------------------
# 1. ê²½ë¡œ ì„¤ì •
# ---------------------------------------------------------
current_dir = os.path.dirname(os.path.abspath(__file__))
root_dir = os.path.abspath(os.path.join(current_dir, "..", "..")) 
base_dir = os.path.join(root_dir, "Level01", "P080")
test_dir = os.path.join(base_dir, "test")

os.makedirs(base_dir, exist_ok=True)
os.makedirs(test_dir, exist_ok=True)

TICK = "`" * 3

# ---------------------------------------------------------
# 2. ë¬¸ì œ ì„¤ëª… (problem.md) 
# ---------------------------------------------------------
problem_template = r"""# ì–´ë²¤ì ¸ìŠ¤: ì›€ì§ì´ëŠ” ìš”ìƒˆì˜ ìµœê³  ìˆ˜í˜¸ì

## ë¬¸ì œ ì„¤ëª…
ì–´ë²¤ì ¸ìŠ¤ì˜ 'ì›€ì§ì´ëŠ” ìš”ìƒˆ'ê°€ ì „ì„ ì„ ë”°ë¼ ì´ë™í•˜ë©° ì ì„ ë°©ì–´í•©ë‹ˆë‹¤. ì „ì„ ì—ëŠ” $N$ëª…ì˜ íˆì–´ë¡œê°€ ìˆœì„œëŒ€ë¡œ ë°°ì¹˜ë˜ì–´ ìˆê³ , ê° íˆì–´ë¡œëŠ” ê³ ìœ ì˜ **ì „íˆ¬ë ¥**ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

ìš”ìƒˆëŠ” í•œ ë²ˆì— **ì—°ì†ëœ $K$ëª…ì˜ íˆì–´ë¡œ**ë§Œ ìˆ˜ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ìƒˆê°€ ì „ì§„í•¨ì— ë”°ë¼ ìˆ˜ìš© ë²”ìœ„(Window)ëŠ” ì˜¤ë¥¸ìª½ìœ¼ë¡œ í•œ ì¹¸ì”© ì´ë™í•©ë‹ˆë‹¤. í† ë‹ˆ ìŠ¤íƒ€í¬ëŠ” ìš”ìƒˆê°€ ì´ë™í•  ë•Œë§ˆë‹¤ **í˜„ì¬ ìˆ˜ìš©ëœ $K$ëª…ì˜ íˆì–´ë¡œ ì¤‘ ê°€ì¥ ê°•í•œ íˆì–´ë¡œì˜ ì „íˆ¬ë ¥**ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê¸°ë¡í•˜ë ¤ í•©ë‹ˆë‹¤.

---

## ğŸ’¡ íì˜ ì–‘ìª½ ë¬¸ ê´€ë¦¬ ì›ì¹™ (Logic)
ì´ ì‘ì „ì€ **ë±(Deque)**ì´ë¼ëŠ” ì–‘ë°©í–¥ ì…êµ¬ë¥¼ ê°€ì§„ í†µë¡œë¥¼ í†µí•´ $O(N)$ì˜ ì†ë„ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

- **ì˜¤ë¥¸ìª½ ë¬¸ ì •ë¦¬ (ê°•ì êµì²´):** ìƒˆë¡œìš´ íˆì–´ë¡œê°€ ë“¤ì–´ì˜¬ ë•Œ, í ë’¤ìª½ì— ìˆëŠ” íˆì–´ë¡œë“¤ ì¤‘ ì‹ ì…ë³´ë‹¤ ì „íˆ¬ë ¥ì´ ë‚®ì€ ì´ë“¤ì€ ëª¨ë‘ ë‚´ë³´ëƒ…ë‹ˆë‹¤. (ì‹ ì…ì´ ë” ê°•í•˜ê³  ë” ì˜¤ë˜ ì‚´ì•„ë‚¨ì„ ê²ƒì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.)
- **ì™¼ìª½ ë¬¸ ì •ë¦¬ (ë²”ìœ„ ì´íƒˆ):** íì˜ ë§¨ ì•(ê°€ì¥ ê°•í•œ ì)ì˜ ìœ„ì¹˜ê°€ í˜„ì¬ ìš”ìƒˆì˜ ìˆ˜ìš© ë²”ìœ„ë¥¼ ë²—ì–´ë‚¬ë‹¤ë©´ ë‚´ë³´ëƒ…ë‹ˆë‹¤.
- **ìµœê³  ìˆ˜í˜¸ì ì„ ë°œ:** ìœ„ ì •ë¦¬ê°€ ëë‚˜ë©´ **íì˜ ë§¨ ì•**ì— ìˆëŠ” íˆì–´ë¡œê°€ í˜„ì¬ êµ¬ê°„ì˜ ìµœê°•ìì…ë‹ˆë‹¤.

---

## ì…ë ¥ í˜•ì‹ (Input Format)
- ì²« ë²ˆì§¸ ì¤„: íˆì–´ë¡œ ìˆ˜ $N$, ìˆ˜ìš© ë²”ìœ„ $K$ ($1 \le K \le N \le 100,000$)
- ë‘ ë²ˆì§¸ ì¤„: $N$ê°œì˜ ì—ë„ˆì§€ ì „íˆ¬ë ¥ $E_1, E_2, \dots, E_N$ ($0 \le E_i \le 10^9$)

## ì¶œë ¥ í˜•ì‹ (Output Format)
- ê° êµ¬ê°„ì˜ ìµœëŒ“ê°’ì„ ê³µë°±ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ í•œ ì¤„ì— ì¶œë ¥í•©ë‹ˆë‹¤.

---

## ì…ì¶œë ¥ ì˜ˆì‹œ (Sample I/O)

### ì˜ˆì‹œ 1 ($N=8, K=3$)
**Input:**
{TICK}
8 3
1 3 -1 -3 5 3 6 7
{TICK}

**Output:** `3 3 5 5 6 7`

**[ì‘ì „ ê¸°ë¡]**
- **ì…ë ¥ 1, 3, -1:** 3ì´ ë“¤ì–´ì˜¬ ë•Œ 1ì„ ë°€ì–´ë‚´ê³ , -1ì€ 3 ë’¤ì— ì¤„ì„ ì„¬. ì²« êµ¬ê°„ ìµœëŒ“ê°’ **3**.
- **ì…ë ¥ -3:** 3ì˜ ì˜í–¥ë ¥ì´ ì—¬ì „í•¨. ìµœëŒ“ê°’ **3**.
- **ì…ë ¥ 5:** 5ê°€ ë“¤ì–´ì˜¤ë©´ì„œ ê¸°ì¡´ì˜ 3, -1, -3ì„ ëª¨ë‘ ë°€ì–´ëƒ„. ìµœëŒ“ê°’ **5**.
- **ì…ë ¥ 3:** 5ì˜ ì˜í–¥ë ¥ì´ ìœ ì§€ë¨. ìµœëŒ“ê°’ **5**.
- **ì…ë ¥ 6:** 6ì´ ë“¤ì–´ì˜¤ë©´ì„œ 5ì™€ 3ì„ ë°€ì–´ëƒ„. ìµœëŒ“ê°’ **6**.
- **ì…ë ¥ 7:** 7ì´ ë“¤ì–´ì˜¤ë©´ì„œ 6ì„ ë°€ì–´ëƒ„. ìµœëŒ“ê°’ **7**.

---

### ì˜ˆì‹œ 2 ($N=5, K=2$ - ì„¸ëŒ€êµì²´)
**Input:**
{TICK}
5 2
10 20 30 25 15
{TICK}

**Output:** `20 30 30 25`

**[ì‘ì „ ê¸°ë¡]**
- **(10, 20):** 20ì´ ë“¤ì–´ì˜¤ë©° 10ì„ íì—ì„œ í‡´ì¶œì‹œí‚´. ìµœëŒ“ê°’ **20**.
- **(20, 30):** 30ì´ ë“¤ì–´ì˜¤ë©° 20ì„ íì—ì„œ í‡´ì¶œì‹œí‚´. ìµœëŒ“ê°’ **30**.
- **(30, 25):** 25ëŠ” 30ë³´ë‹¤ ì•½í•˜ë¯€ë¡œ 30 ë’¤ì— ëŒ€ê¸°í•¨. ìµœëŒ“ê°’ **30**.
- **(25, 15):** 30ì˜ ìœ íš¨ ê¸°ê°„(K=2)ì´ ëë‚˜ í ì™¼ìª½ìœ¼ë¡œ í‡´ì¶œë¨. ì´ì œ 25ê°€ ìµœê°•ìê°€ ë¨. ìµœëŒ“ê°’ **25**.

---

### ì˜ˆì‹œ 3 ($N=6, K=3$ - ëŒ€ì¥ì˜ ì€í‡´)
**Input:**
{TICK}
6 3
5 10 5 2 1 8
{TICK}

**Output:** `10 10 5 8`

**[ì‘ì „ ê¸°ë¡]**
- **(5, 10, 5):** 10ì´ 5ë¥¼ ë°€ì–´ë‚´ê³  ëŒ€ì¥ì´ ë¨. ì´í›„ 5ê°€ ë’¤ì— ëŒ€ê¸°. ìµœëŒ“ê°’ **10**.
- **(10, 5, 2):** 10ì˜ ë²”ìœ„ê°€ ì•„ì§ ìœ íš¨í•¨. ìµœëŒ“ê°’ **10**.
- **(5, 2, 1):** 10ì˜ ë²”ìœ„(K=3)ê°€ ëë‚˜ì„œ í‡´ì¶œë¨. ëŒ€ê¸°í•˜ë˜ 5ê°€ ëŒ€ì¥ì´ ë¨. ìµœëŒ“ê°’ **5**.
- **(2, 1, 8):** 8ì´ ë“¤ì–´ì˜¤ë©´ì„œ ì•ì˜ 2, 1ì€ ë¬¼ë¡  5ê¹Œì§€ ëª¨ë‘ ë°€ì–´ëƒ„. ìµœëŒ“ê°’ **8**.
"""

problem_md = problem_template.replace("{TICK}", TICK)
with open(os.path.join(base_dir, "problem.md"), "w", encoding="utf-8") as f:
    f.write(problem_md)

# ---------------------------------------------------------
# 3. ì •ë‹µ ì½”ë“œ (solution.py) 
# ---------------------------------------------------------
solution_py = r"""import sys
from collections import deque

input = sys.stdin.readline

def solve():
    line = input().split()
    if not line: return
    n, k = int(line[0]), int(line[1])
    
    energies = list(map(int, input().split()))
    dq = deque() # íˆì–´ë¡œì˜ ì¸ë±ìŠ¤ ì €ì¥
    
    for i in range(n):
        # 1. [ì™¼ìª½ ë¬¸] ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ì¸ë±ìŠ¤ ì œê±°
        if dq and dq[0] < i - k + 1:
            dq.popleft()
            
        # 2. [ì˜¤ë¥¸ìª½ ë¬¸] í˜„ì¬ë³´ë‹¤ ì•½í•œ ì´ì „ ë©¤ë²„ë“¤ ì œê±° (ë‹¨ì¡°ì„± ìœ ì§€)
        while dq and energies[dq[-1]] <= energies[i]:
            dq.pop()
            
        dq.append(i)
        
        # 3. ìš”ìƒˆê°€ Këª…ì„ ì±„ìš´ ì‹œì ë¶€í„° ìµœê°•ì ì¶œë ¥
        if i >= k - 1:
            print(energies[dq[0]], end=' ')
    print()

if __name__ == "__main__":
    solve()
"""

with open(os.path.join(base_dir, "solution.py"), "w", encoding="utf-8") as f:
    f.write(solution_py)

# ---------------------------------------------------------
# 4. í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ìƒì„± ë¡œì§
# ---------------------------------------------------------
def solve_internal(n, k, nums):
    dq, res = deque(), []
    for i in range(n):
        if dq and dq[0] < i - k + 1: dq.popleft()
        while dq and nums[dq[-1]] <= nums[i]: dq.pop()
        dq.append(i)
        if i >= k - 1: res.append(str(nums[dq[0]]))
    return " ".join(res)

test_data = [
    (8, 3, [1, 3, -1, -3, 5, 3, 6, 7]),
    (5, 2, [10, 20, 30, 25, 15]),
    (6, 3, [5, 10, 5, 2, 1, 8])
]

for _ in range(17):
    tn = random.randint(100, 500)
    tk = random.randint(10, 50)
    te = [random.randint(0, 1000) for _ in range(tn)]
    test_data.append((tn, tk, te))

for i, (n, k, nums) in enumerate(test_data, 1):
    input_str = f"{n} {k}\n" + " ".join(map(str, nums))
    ans = solve_internal(n, k, nums)
    with open(os.path.join(test_dir, f"{i}.in"), "w", encoding="utf-8") as f:
        f.write(input_str.strip())
    with open(os.path.join(test_dir, f"{i}.out"), "w", encoding="utf-8") as f:
        f.write(ans)

print(f"âœ… 'Level01/P080' ë¬¸ì œ ìƒì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ")