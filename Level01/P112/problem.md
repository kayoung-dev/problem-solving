---
title: "온도 차단막 설치 최소화"
level: "1"
time_limit: 1000
memory_limit: 128
languages: ["c", "cpp", "java", "js", "go", "python"]
tags: ["MST", "sorting"]
---

## description
시설 관리자 **소연**은 여러 구역으로 나뉜 실험 온실을 점검하려고 합니다.  
온실은 $R \times C$ 격자 형태이며, 각 칸에는 그 구역의 **온도**가 적혀 있습니다.

소연은 한 번에 **상, 하, 좌, 우**로 인접한 한 칸만 이동할 수 있습니다.  
인접한 두 구역의 온도가 너무 다르면 순간적인 온도 변화로 장비에 문제가 생길 수 있어,
그 경계에 **차단막(단열 커버)** 을 설치하려 합니다.

인접한 두 칸의 온도를 $T_a$, $T_b$라고 할 때 온도 차는 $|T_a - T_b|$ 입니다.

- 허용 가능한 온도 차는 $H$ 입니다.
- $|T_a - T_b| \le H$ 이면 차단막 없이 통과할 수 있습니다.
- $|T_a - T_b| > H$ 이면 그 경계에는 차단막을 설치해야 하며, **설치 개수는 1개**로 셉니다.
- 한 번 설치한 차단막은 계속 남아서, 그 경계는 이후에도 안전하게 통과할 수 있습니다.

소연이 **모든 칸을 서로 오갈 수 있도록** 만들기 위해 필요한 차단막 **최소 설치 개수**를 구하세요.



## input_description
- 첫째 줄에 정수 $R$, $C$, $H$가 공백으로 주어집니다.
- 다음 $R$줄에 걸쳐 각 줄마다 $C$개의 정수로 온도가 주어집니다.

## output_description
- 모든 칸이 서로 이동 가능해지도록 만들기 위한 차단막 **최소 설치 개수**를 출력합니다.

# samples

### input 1
```
4 5 2
20 20 21 21 22
20 21 21 22 22
19 20 21 22 23
19 20 20 21 22
```

### output 1
```
0
```
- 대부분의 인접 칸이 $|T_a - T_b| \le 2$ 를 만족해 차단막이 거의 필요 없습니다.
- 꼭 필요한 경계만 골라 설치했을 때의 최소 개수가 출력값입니다.

### input 2
```
4 4 3
18 18 18 40
18 19 19 41
18 19 20 42
18 18 20 43
```

### output 2
```
1
```
- 오른쪽 열은 온도가 $40$ 이상이라, 왼쪽 영역($18\sim20$)과 온도 차가 크게 벌어집니다.
- 결국 오른쪽 영역으로 넘어가는 경계는 최소 한 번 이상 차단막 설치가 필요하며,
  전체가 이어지도록 설치 개수를 최소화한 결과가 출력값입니다.

### input 3
```
5 4 1
10 12 11 13
10 12 11 13
10 25 26 13
10 25 26 13
10 12 11 13
```

### output 3
```
4
```

## hint

- 각 칸을 “구역”, 인접한 상·하·좌·우 관계를 “연결 후보”라고 생각할 수 있습니다.
- 인접한 두 구역의 온도를 $T_a, T_b$라 할 때,
  
  $|T_a - T_b| \le H$
  이면 설치 없이 통과할 수 있고, 그렇지 않으면 그 경계에 **차단막 1개**가 필요합니다.
  즉, 모든 인접 경계의 비용은 **0 또는 1**입니다.

- 목표는 모든 구역이 서로 오갈 수 있도록 만들되, **차단막 설치 개수의 합을 최소화**하는 것입니다.  
  “이미 같은 덩어리로 이어진 구역들끼리” 다시 연결하는 선택은 의미가 없습니다.

- Minimum Spanning Tree 구현 팁:
  - 어떤 구역에서 시작해도 됩니다.
  - 현재까지 이어진 구역 집합과, 아직 이어지지 않은 구역을 잇는 경계들 중에서 **비용이 더 작은 경계(0이 우선, 그다음 1)** 를 반복해서 선택하면 유리합니다.
  - 새 구역이 이어지면, 그 구역의 인접 경계들을 후보로 추가하는 방식으로 확장할 수 있습니다.

